<html>
<head>
<title>Spacewar! - Original 1962 code on PDP-1 emulator</title>
<meta name="keywords" content="Spacewar, game, original, PDP-1, emulator, gerasimov, silverman, Graetz, Russell, Wiitanen">
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<style type="text/css">@import "spacewar.css";</style>
<script type="text/javascript" src="spacewar.js"></script>
<script type="text/javascript" src="spacewar.bin.js"></script>
<script type="text/javascript" src="ptr.js"></script>
<script type="text/javascript">
  if (!document.createElement('canvas').getContext) {
    window.location = "nocanvas.html";
  }
</script>
</head>

<body onload="setup();">
<h1><font face="Arial"><font size="5">Spacewar!</font><br>
<font size="3">Original 1962 game code running on a PDP-1 emulator in JavaScript</font></font></h1>
<h1><a href = "readme.html"><font face="Arial" size="3">Readme</font></a></h1><p>
<div class="frame" id="frame">
<div class="spacewar">
<canvas class="spacewar" id="swcanvas"></canvas>
</div>
</div>
<label for="rimfile">Load RIM tape:</label>
<input type="file" id="rimfile">
<form id="testword_checkboxes">
  <label>Test word</label>
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
    <input type="checkbox">
</form>
<script>
  document.querySelector("#testword_checkboxes").addEventListener("change", function(event) {
    console.log(this.elements);
    testWord = 0;
    for(let i = 0; i < this.elements.length; i++) {
      let bit = this.elements[i].checked ? 1 : 0;
      testWord = testWord | (bit << i);
    }
    console.log("Test word (in octal)", testWord.toString(8));
  });
</script>
<script>
  document.querySelector("#rimfile").addEventListener("change", async function(event) {
    if(event.target.files.length > 0) {
      console.log("Loading RIM file");
      let buffer = await event.target.files[0].arrayBuffer();
      console.log("RIM in memory");
      ptr.load(new Uint8Array(buffer));
      ptr.rim();
      console.log("RIM executing");
    }
  });
</script>
</body>
</html>
